<app-backnavbar></app-backnavbar>
<div class="publish-container">
  <div class="container py-5">
    
    <div class="form-wrapper">
      
      <!-- Header -->
      <div class="form-header">
        <h1 class="form-title">ğŸš— Publier un trajet</h1>
        <p class="form-subtitle">Partagez votre route et rÃ©duisez vos frais</p>
        
        <!-- Progress Steps -->
        <div class="steps-indicator">
          <div class="step" [class.active]="currentStep >= 1" [class.completed]="currentStep > 1">
            <div class="step-icon">ğŸ“</div>
            <span class="step-label">ItinÃ©raire</span>
          </div>
          <div class="step-line" [class.filled]="currentStep > 1"></div>
          <div class="step" [class.active]="currentStep >= 2" [class.completed]="currentStep > 2">
            <div class="step-icon">ğŸ“…</div>
            <span class="step-label">DÃ©tails</span>
          </div>
          <div class="step-line" [class.filled]="currentStep > 2"></div>
          <div class="step" [class.active]="currentStep >= 3">
            <div class="step-icon">âœ…</div>
            <span class="step-label">Confirmation</span>
          </div>
        </div>
      </div>

      <form [formGroup]="rideForm" (ngSubmit)="onSubmit()" class="ride-form">
        
        <!-- Step 1: Route -->
<!-- Step 1: Route -->
<div class="form-step" *ngIf="currentStep === 1">
  <h3 class="step-title">D'oÃ¹ partez-vous ?</h3>

  <div class="input-group-animated">
    <span class="input-icon">ğŸ“</span>

    <select formControlName="origin" class="modern-input">
      <option value="" disabled selected>Choisir une ville</option>
      <option *ngFor="let g of governorates" [value]="g">{{ g }}</option>
    </select>

    <label>DÃ©part</label>
  </div>

  <div class="connector-line">
    <span class="arrow">â¬‡</span>
  </div>

  <div class="input-group-animated">
    <span class="input-icon">ğŸ</span>

    <select formControlName="destination" class="modern-input">
      <option value="" disabled selected>Choisir une ville</option>
      <option *ngFor="let g of governorates" [value]="g">{{ g }}</option>
    </select>

    <label>ArrivÃ©e</label>
  </div>

  <div class="step-actions">
    <div></div>
    <button type="button" class="btn-next" (click)="nextStep()">Suivant âœ</button>
  </div>
</div>


        <!-- Step 2: Details -->
<div class="col-md-6">
  <label class="counter-label">Nombre de places</label>

  <div class="counter">
    <button type="button" (click)="decrementSeats()">âˆ’</button>

    <span>{{ rideForm.get('totalSeats')?.value }}</span>

    <button type="button" (click)="incrementSeats()">+</button>
  </div>
</div>
<div class="options-grid mt-4">
  <label class="checkbox-card">
    <input type="checkbox" formControlName="luggageAllowed">
    <span class="card-content">
      <span class="card-icon">ğŸ’</span>
      <span class="card-text">Bagages autorisÃ©s</span>
    </span>
  </label>
</div>
<h3 class="step-title mt-4">Informations du trajet</h3>

<div class="row mt-3">
  <!-- Date -->
  <div class="col-md-6">
    <div class="input-group-animated">
      <span class="input-icon">ğŸ“…</span>
      <input type="date" formControlName="date" class="modern-input">
      <label>Date de dÃ©part</label>
    </div>
  </div>

  <!-- Heure -->
  <div class="col-md-6">
    <div class="input-group-animated">
      <span class="input-icon">â°</span>
      <input type="time" formControlName="time" class="modern-input">
      <label>Heure</label>
    </div>
  </div>
</div>

<!-- Prix -->
<div class="input-group-animated mt-3">
  <span class="input-icon">ğŸ’¶</span>
  <input type="number" formControlName="price" class="modern-input" placeholder="0" min="0">
  <label>Prix par place (Dt)</label>
</div>

<h3 class="step-title mt-4">Description</h3>

<div class="input-group-animated">
  <textarea formControlName="description" class="modern-textarea"
    placeholder="DÃ©tails supplÃ©mentaires (optionnel)">
  </textarea>
</div>
          <div class="step-actions">
            <button type="button" class="btn-prev" (click)="prevStep()">â¬… Retour</button>
    <button type="button" class="btn-next" (click)="nextStep()">Suivant âœ</button>
  </div>




        <!-- Step 3: Confirmation / Preview -->
        <div class="form-step" *ngIf="currentStep === 3">
          <h3 class="step-title text-center">RÃ©capitulatif</h3>
          
          <div class="preview-card">
            <div class="preview-route">
              <div class="city">{{ rideForm.get('origin')?.value || 'DÃ©part' }}</div>
              <div class="route-visual">
                <div class="line"></div>
                <div class="icon">ğŸš—</div>
              </div>
              <div class="city">
{{ rideForm.get('destination')?.value || 'ArrivÃ©e' }}
</div>
            </div>
            
            <div class="preview-details">
              <div class="detail">
                <span class="icon">ğŸ“…</span>
                <span>{{ rideForm.get('date')?.value }}</span>
              </div>
              <div class="detail">
                <span class="icon">â°</span>
                <span>{{ rideForm.get('time')?.value }}</span>
              </div>
              <div class="detail">
                <span class="icon">ğŸ’¶</span>
                <span class="price-highlight">{{ rideForm.get('price')?.value }}dt</span>
              </div>
            </div>
          </div>

          <div class="input-group-animated mt-4">
            <span class="input-icon">ğŸ“</span>
            <textarea formControlName="description" placeholder="Informations complÃ©mentaires pour les passagers..." class="modern-textarea" rows="3">{{ rideForm.get('description')?.value }}</textarea>
            
          </div>

          <div class="step-actions">
            <button type="button" class="btn-prev" (click)="prevStep()">â¬… Retour</button>
            <button type="submit" class="btn-publish">ğŸš€ Publier le trajet</button>
          </div>
        </div>

      </form>

    </div>
  </div>
</div>